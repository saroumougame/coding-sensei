(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{1007:function(e,t,a){e.exports={"--sm":"(--sm)","--md-min":"(--md-min)",colorGrey:"#999",colorDarkWhite:"#f5f5f5",colorLightBlack:"#111",headingXs:"_2uOAz",fontWeightSemibold:"_13Ib2",truncate:"_1ByhS",textDecorationNone:"_1CBrG",maxWidth:"750px",smallImagePercentage:"30%",bigImagePercentage:"70%",aspectRatioWrapper:"_2Dp1M",collectionContainer:"_28_Yu",linkWrapper:"fM0CB _1CBrG",imagesContainer:"_2zwgf",smallImagesContainer:"_2gO6E",image:"Kh8bw",bigImageWrapper:"_2vGrb",smallImageWrapper:"mTW0H",titleContainer:"_3zVYZ _1ByhS",iconPrivate:"_39uDR",title:"_2LKkn _2uOAz _13Ib2 _1ByhS",description:"_3-HBj _1ByhS",userLink:"_37zDu"}},1012:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n=function(t){return function(e){return t.username===e.username}}},1013:function(e,t,a){"use strict";t.__esModule=!0;var n=r(a(1014)),o=r(a(1015));r(a(442)),r(a(443));function r(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return(0,n.default)(function(e,t){return!(0,o.default)(e,t)})(e)}},1014:function(e,t,a){"use strict";t.__esModule=!0;var o=a(0);n(a(442)),n(a(443));function n(e){return e&&e.__esModule?e:{default:e}}t.default=function(n){return function(e){var a=(0,o.createFactory)(e);return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return n(this.props,e)},t.prototype.render=function(){return a(this.props)},t}(o.Component)}}},1015:function(e,t,a){"use strict";t.__esModule=!0;var n,o=a(1016),r=(n=o)&&n.__esModule?n:{default:n};t.default=r.default},1016:function(e,t,a){"use strict";var r=Object.prototype.hasOwnProperty;function c(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}e.exports=function(e,t){if(c(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var a=Object.keys(e),n=Object.keys(t);if(a.length!==n.length)return!1;for(var o=0;o<a.length;o++)if(!r.call(t,a[o])||!c(e[a[o]],t[a[o]]))return!1;return!0}},1020:function(e,t,a){"use strict";a(19),a(20),a(14);var n=a(10),u=a.n(n),o=a(4),r=a.n(o),c=a(170),i=a.n(c),s=a(0),m=a.n(s),l=a(16),d=a(1504),p=a(1503),f=a(1494),h=a(7),b=a(54),g=a(17),v=a(13),y=a(27),O=a(24),_=Object(O.a)("M31.2 12.8h-2.4v-2.4c0-.4-.4-.8-.8-.8h-1.6c-.4 0-.8.4-.8.8v2.4h-2.4c-.4 0-.8.4-.8.8v1.6c0 .4.4.8.8.8h2.4v2.4c0 .4.4.8.8.8h1.6c.4 0 .8-.4.8-.8v-2.4h2.4c.4 0 .8-.4.8-.8v-1.6c0-.4-.4-.8-.8-.8zm-15.2 5.1v-1.2c1.9-1.1 3.2-3.1 3.2-5.5v-1.6c0-3.5-2.9-6.4-6.4-6.4s-6.4 2.9-6.4 6.4v1.6c0 2.4 1.3 4.4 3.2 5.5v1.2c-5.5.9-9.6 4-9.6 7.7v1.6c0 .9.7 1.6 1.6 1.6h22.4c.9 0 1.6-.7 1.6-1.6v-1.6c0-3.7-4.1-6.8-9.6-7.7z"),I=a(204),E=a(32),S=a(48),w=a(992),j=a.n(w);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=Object(v.a)()({labelText:{isFollowing:"Following",isNotFollowing:"Follow"}}),k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),N(this,P(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,s["Component"]),a=t,(n=[{key:"componentWillUnmount",value:function(){this.followSubscription&&this.followSubscription.unsubscribe()}},{key:"getLabelText",value:function(){var e=this.props.labelText;return this.props.selectedUser.followed_by_user?e.isFollowing:e.isNotFollowing}},{key:"buildToLink",value:function(){var e=this.props,t=e.authUser,a=e.location,n=Object(g.g)(a),o=t?n:Object.assign({},n,{login_view:"is_visible",login_action:"follow"});return{pathname:a.pathname,search:Object(I.a)(o),state:a.state}}},{key:"buildClickHandler",value:function(){var t=this,e=this.props,a=e.authUser,n=e.selectedUser,o=e.followUser,r=e.unfollowUser,c=e.trackFollowButtonClick,i=e.trackUnfollowButtonClick,s=e.buttonType;if(!a)return function(){return c(n.id,s)};var l=n.username,u=n.followed_by_user,m=(u?b.a.users.unfollowUser:b.a.users.followUser)({username:l}).pipe(Object(p.a)(3),Object(f.a)(1));return function(e){e.stopPropagation(),u?(r(n.id),i(n.id,s)):(o(n.id),c(n.id,s)),t.followSubscription=m.subscribe()}}},{key:"renderContainer",value:function(e){var t=this.props,a=t.selectedUser,n=t.className,o=t.redirectAfterFollow,r=t.authUser,c=this.buildClickHandler(),i=a.followed_by_user,s=o||!r,l={className:u()(j.a.followButton,i&&j.a.isFollowing,n),buttonSize:"small"};return s?m.a.createElement(S.a,Object.assign({tag:"link",to:this.buildToLink(),onMouseUp:c},l),e):m.a.createElement(S.a,Object.assign({tag:"button",onMouseUp:c},l),e)}},{key:"render",value:function(){var e=this.props,t=e.selectedUser,a=e.authUser;return i()(a,"username")===t.username?m.a.createElement("div",null):this.renderContainer(m.a.createElement("span",null,m.a.createElement(_,{className:j.a.followIcon}),this.getLabelText()))}}])&&T(a.prototype,n),o&&T(a,o),t}();k.displayName="FollowButton";Object(y.b)(C)(k);var x={trackFollowButtonClick:h.V,trackUnfollowButtonClick:h.gb,followUser:h.p,unfollowUser:h.jb},L=r()(Object(l.connect)(function(e){return{authUser:Object(E.d)(e)}},x),d.a,Object(y.b)(C))(k);a.d(t,"a",function(){return L})},1028:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"b",function(){return o}),a.d(t,"d",function(){return r}),a.d(t,"a",function(){return c});var n=4,o=12,r=30,c=30},1029:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return o});var n=600,o=500},1032:function(e,t,a){"use strict";a(137);var h,n,b=a(2),o=a(4),r=a.n(o),c=a(0),g=a.n(c),i=a(16),v=a(805),y=a(444),O=a(125),_=a(101),s=a(13),l=a(27),I=a(269),u=a(32),E=a(449),S=a(991),w=a(451),m=a(441),d=a(446),p=a(86),f=a(1007),j=a.n(f),R=Object(m.i)(Object(m.e)({styles:j.a,className:"maxWidth",fallback:"200"}));(n=h||(h={})).full="full",n.half="half";var T=function(e){return e.urls.raw},N=function(t){return function(e){return{src:Object(p.d)(e)({w:R}),srcSet:Object(d.b)({baseUrl:e,width:R*function(e){switch(e){case h.full:return Object(m.h)(Object(m.e)({styles:j.a,className:"bigImagePercentage",fallback:"50%"}));case h.half:return Object(m.h)(Object(m.e)({styles:j.a,className:"smallImagePercentage",fallback:"50%"}))}}(t),getParams:b.a.none()})}}},P=function(e,t,a){return e.chain(function(e){return Object(s.c)(t,e)}).map(T).map(N(a))},D=Object(s.a)()({showUserInfo:!0}),C=function(e){var t=e.collection,a=e.isLoggedIn,n=e.showUserInfo,o=t.user,r=t.total_photos,c=t.preview_photos,i=t.private,s=t.tags,l=Object(O.e)(t),u=b.a.of(c),m=P(u,0,h.full),d=P(u,1,h.half),p=P(u,2,h.half),f=n?g.a.createElement("span",null," ","Â· Curated by"," ",a?g.a.createElement(v.a,{to:Object(_.f)(o),className:j.a.userLink},o.name):o.name):null;return g.a.createElement(g.a.Fragment,null,g.a.createElement("div",{className:j.a.aspectRatioWrapper},g.a.createElement("div",{className:j.a.collectionContainer},g.a.createElement(v.a,{to:{pathname:l},className:j.a.linkWrapper},g.a.createElement("div",{className:j.a.imagesContainer},m.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(E.a,{role:"presentation",containerClassName:j.a.bigImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.bigImageWrapper})),g.a.createElement("div",{className:j.a.smallImagesContainer},d.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(E.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.smallImageWrapper})),p.map(function(e){var t=e.src,a=e.srcSet;return g.a.createElement(E.a,{role:"presentation",containerClassName:j.a.smallImageWrapper,className:j.a.image,src:t,srcSet:a})}).getOrElse(g.a.createElement("div",{className:j.a.smallImageWrapper})))),g.a.createElement("div",{className:j.a.titleContainer},i&&g.a.createElement("span",{className:j.a.isPrivateContainer},g.a.createElement(w.a,{className:j.a.isPrivateTooltip,label:"This collection is private. To share, copy the URL or make the collection public.",width:200},g.a.createElement(I.a,{className:j.a.iconPrivate}))),g.a.createElement("div",{className:j.a.title},t.title))),g.a.createElement("div",{className:j.a.description},r," photos",f))),g.a.createElement(S.a,{tags:s,takeN:3,emplacement:y.a.CollectionCard}))};C.displayName="CollectionCard";var k=r()(Object(i.connect)(function(e,t){return{isLoggedIn:Object(u.k)(e)}}),Object(l.b)(D))(C);a.d(t,"a",function(){return k})},1035:function(e,t,a){e.exports={"--sm":"(--sm)","--sm-min":"(--sm-min)","--md-min":"(--md-min)",colorLightGrey:"#ddd",placeholderBackground:"_2VWD4",gutter:"12px",oneHundrendPercent:"100%",fiftyPercent:"50%",collectionContainer:"_15M91",placeholderAspectRatioWrapper:"_2rCoL",placeholderContainer:"_3jSxL",placeholder:"_1X2ch _2VWD4",placeholderTextBox:"_3I0Nd _2VWD4",placeholderTextBox2:"mpqhr _2VWD4",placeholderTextBox3:"yxc4t _2VWD4",placeholderTextBox1:"_2pqeA _2VWD4"}},1042:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(341),c=a(1032),i=a(1035),s=a.n(i),l=function(e){var t=e.collection;return o.a.createElement("div",{className:s.a.collectionContainer,"data-test":r.c},t?o.a.createElement(c.a,{collection:t}):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:s.a.placeholderAspectRatioWrapper},o.a.createElement("div",{className:s.a.placeholderContainer},o.a.createElement("div",{className:s.a.placeholder}),o.a.createElement("div",{className:s.a.placeholderTextBox}),o.a.createElement("div",{className:s.a.placeholderTextBox2}))),o.a.createElement("div",{className:s.a.placeholderTextBox3})))};l.displayName="CollectionFeedCard";var u=l;a.d(t,"a",function(){return u})},1050:function(e,t,a){e.exports={"--sm-min":"(--sm-min)",containerLayout:"PrOBO",containerPadding:"_1CR66",fontWeightNormal:"_27Bp2",container:"_3w_cF PrOBO _1CR66",heading:"_2azK- _27Bp2",hideOnMobile:"_1Co2N"}},1057:function(e,t,a){"use strict";a.d(t,"b",function(){return o}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return u});a(84),a(85),a(53),a(19),a(20),a(29);var n=a(4),r=a.n(n),c=a(0),i=a(43);function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=function(e){var o=e.render;return r()(function(e){return e.map(function(e){var t,a=e.maybeEl,n=e.key;return a.map(o).map((t=n,function(e){return Object(c.cloneElement)(e,{key:t})}))})},i.a)},l=function(e){var t=e.render,a=e.renderItem;return r()(o({render:a}),i.c,function(e){return e.map(t)})},u=function(n,o){return n.reduce(function(e,t,a){return s(e).concat([t],s(a===n.length-1?[]:[o(a)]))},[])}},1061:function(e,t,a){"use strict";var n=a(10),i=a.n(n),o=a(265),s=a.n(o),r=a(0),l=a.n(r),c=a(1028),u=a(444),m=a(13),d=a(27),p=a(991),f=a(1050),h=a.n(f),b=Object(m.a)()({tags:[],headingCopy:"Related searches",showHeading:!1,hideOnMobile:!1,maximumResultsCount:c.b}),g=function(e){var t=e.showHeading,a=e.tags,n=e.hideOnMobile,o=e.headingCopy,r=e.maximumResultsCount,c=s()(a,r);return 0===c.length?l.a.createElement("div",null):l.a.createElement("div",{className:i()(h.a.container,n&&h.a.hideOnMobile)},t&&l.a.createElement("p",{className:h.a.heading},o),l.a.createElement(p.a,{tags:c,emplacement:u.a.Related}))};g.displayName="RelatedTags";var v=Object(d.b)(b)(g);a.d(t,"a",function(){return v})},1071:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_33G6- _2npM8",heading:"_2gjZV _33G6- _2npM8",flexFeed:"_3b8t6"}},1073:function(e,t,a){e.exports={spacingUnit:"4px",flexContainer:"_10F2J",icon:"_1xhtJ",text:"_3UPwX"}},1075:function(e,t,a){e.exports={spacingUnit:"4px",fontWeightNormal:"_27Bp2",colorFacebook:"#3b5998",colorTwitter:"#1da1f2",colorPinterest:"#c92228",colorDarkGrey:"#777",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",cellPaddingUnitHalf:"4px",headerFontSize:"21px",smallFontSize:"12px",container:"_2VlB5",cell:"_1dPrd",halfCell:"_201D8",title:"_32uh- _27Bp2",subtitle:"_2B7-n",shareLinks:"_3E7sP",shareLinkContainer:"_1J04C",shareLink:"_2SPjs",shareLinkIcon:"_2U6YH",facebookShareLinkIcon:"_272Go _2U6YH",twitterShareLinkIcon:"_1tkzW _2U6YH",pinterestShareLinkIcon:"ZO3Vz _2U6YH",emailShareLinkIcon:"_2L646 _2U6YH",shareLinkText:"_1Wr08"}},1092:function(e,t,a){"use strict";a.d(t,"a",function(){return s});a(14);var n=a(0),o=a.n(n),r=a(16),c=a(109),i=a(203),s=function(t){var e=function(e){return o.a.createElement(t,Object.assign({},e,{photos:e.photos}))};e.displayName="MapPhotoIdsToPhotos(".concat(Object(c.a)(t),")");return Object(r.connect)(function(){var a=Object(i.g)();return function(e,t){return{photos:a(e,t.photoIds)}}})(e)}},1095:function(e,t,a){"use strict";var n,o;function r(e){var t=e.width,a=e.height;return t<a?n.portrait:a<t?n.landscape:n.square}function c(e){return r(e)===n.landscape}a.d(t,"a",function(){return c}),a.d(t,"b",function(){return i}),(o=n||(n={})).portrait="portrait",o.landscape="landscape",o.square="square";var i=function(e){var t=r(e);return t===n.square||t===n.portrait}},1109:function(e,t,a){"use strict";var n=a(24);t.a=Object(n.a)("M16 0c-6.7 0-12 5.3-12 12 0 8.6 8.6 17.3 11.2 19.7.4.4 1.1.4 1.5 0 2.7-2.4 11.3-11.1 11.3-19.7 0-6.7-5.3-12-12-12zm0 18c-3.3 0-6-2.7-6-6s2.7-6 6-6 6 2.7 6 6-2.7 6-6 6z")},1110:function(e,t,a){"use strict";var n=a(24);t.a=Object(n.a)("M16 0c-8.8 0-16 7.2-16 16s7.2 16 16 16 16-7.2 16-16-7.2-16-16-16zm2 25c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-12c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v12zm0-16c0 .6-.4 1-1 1h-2c-.6 0-1-.4-1-1v-2c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v2z")},1111:function(e,t,a){e.exports={colorGrey:"#999",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",container:"_307c3",actions:"_3-6v7",cell:"_2iWc-",buttonCell:"_27vvN _2iWc-",photographer:"HAAez _2iWc-",downloadButtonCell:"_13Q- _27vvN _2iWc-",downloadButton:"_1AA_u",secondaryLabel:"_2cSl3"}},1131:function(e,t,a){"use strict";a(19),a(20),a(14),a(33);var n=a(10),c=a.n(n),r=a(2),i=a(0),s=a.n(i),l=a(440),o=a(24),u=Object(o.a)("M0 26c0 1.7.2 3.3.6 4.9.2.9.7.9 1 0 2.1-5.3 5.5-10.3 11.1-11.3h3.3v4.4c0 2 1.2 2.6 2.6 1.4l12.8-11c.7-.6.7-1.6 0-2.3l-12.8-11c-1.4-1.3-2.6-.6-2.6 1.3v4.7c-9.6 1.6-16 9.4-16 18.9z"),m=a(48),d=a(1073),p=a.n(d);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=b(this,g(a).call(this,e))).state=t.getInitialState(),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,i["PureComponent"]),t=a,(n=[{key:"getInitialState",value:function(){var a=this,e=this.props.renderType;return{maybeShareFunction:l.a.match({Enhanced:function(){return r.a.some(window)},Unenhanced:function(){return r.a.none()}})(e).chain(function(t){return void 0!==t.navigator.share?r.a.some(function(e){return t.navigator.share(e)}):r.a.none()}).map(function(e){var t=a.props.shareOptions;return function(){return e(t)}})}}},{key:"renderContent",value:function(){return s.a.createElement("div",{className:p.a.flexContainer},s.a.createElement(u,{className:p.a.icon}),s.a.createElement("span",{className:p.a.text},"Share"))}},{key:"render",value:function(){var t=this,e=this.props,a=e.shareLocationDescriptor,n=e.className,o=this.state.maybeShareFunction,r={className:c()(p.a.flexContainer,n),buttonType:"outline",buttonSize:"small"};return o.map(function(e){return s.a.createElement(m.a,Object.assign({tag:"button",onClick:e},r),t.renderContent())}).getOrElseL(function(){return s.a.createElement(m.a,Object.assign({tag:"link",to:a},r),t.renderContent())})}}])&&h(t.prototype,n),o&&h(t,o),a}(),O=Object(l.b)(y);a.d(t,"a",function(){return O})},1132:function(e,t,a){"use strict";a(342),a(14),a(33);var n=a(155),o=a.n(n),r=a(10),c=a.n(r),i=a(0),s=a.n(i),l=a(469),u=a(279),m=a(297),d=a(280),p=a(216),f=a(470),h=a(1075),b=a.n(h),g=function(e){return s.a.createElement(p.b,Object.assign({},e,{className:b.a.shareLink,buttonType:"outline"}),(t={buttonShareType:e.type},a=t.buttonShareType,p.a.match({email:function(){return s.a.createElement(l.a,{className:b.a.emailShareLinkIcon})},facebook:function(){return s.a.createElement(u.a,{className:b.a.facebookShareLinkIcon})},twitter:function(){return s.a.createElement(d.a,{className:b.a.twitterShareLinkIcon})},pinterest:function(){return s.a.createElement(m.a,{className:b.a.pinterestShareLinkIcon})}})(a)),s.a.createElement("span",{className:b.a.shareLinkText},o()(e.type.tag)));var t,a},v=function(e){var t=e.title,a=e.buttonsShareProps,n=e.link;return s.a.createElement("div",null,s.a.createElement("div",{className:b.a.container},s.a.createElement("div",{className:b.a.cell},s.a.createElement("h2",{className:b.a.title},"Share"),s.a.createElement("span",{className:b.a.subtitle},t)),s.a.createElement("div",{className:c()(b.a.halfCell,b.a.shareLinks)},a.map(function(e){return s.a.createElement("div",{key:e.type.tag,className:c()(b.a.halfCell,b.a.shareLinkContainer)},g(e))})),s.a.createElement("div",{className:b.a.cell},s.a.createElement(f.a,{buttonText:"Copy link"},n))))};v.displayName="ShareModalContent";var y=v;a.d(t,"a",function(){return y})},1135:function(e,t,a){"use strict";var n=a(0),o=a.n(n),r=a(16),c=a(13),i=a(27),s=a(272),l=a(1042),u=a(1071),m=a.n(u),d=Object(c.a)()({relatedCollectionIds:[]}),p=function(e){var t=e.relatedCollections,a=e.heading;return 0===t.length?null:o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:m.a.clearfix},o.a.createElement("p",{className:m.a.heading},a)),o.a.createElement("div",{className:m.a.flexFeed},t.map(function(e,t){return o.a.createElement(l.a,{key:t,collection:e})})))};p.displayName="RelatedCollections";var f=Object(i.b)(d)(Object(r.connect)(function(e,t){return{relatedCollections:Object(s.c)(e,t.relatedCollectionIds)}})(p));a.d(t,"a",function(){return f})},1143:function(e,t,a){e.exports={resetBtn:"DWLeW",spacingUnit:"4px",centerItem:"_3mCZ_",isFixedMediaCondition:"(max-width: 767px)",isZoomableMediaCondition:"(min-width: 768px)",imagePlaceholder:"_2yFK-",imageContainer:"_1ac-D _3mCZ_",imageButton:"_1szcv DWLeW",overlay:"_2MKkb",imageButtonZoomedIn:"_2-OhB",imageButtonZoomedOut:"_1YS_6",overlayChild:"_1w7cG",zoomToggleIcon:"_1NYtf",isFixed:"pADQw",isZoomable:"_2QvSN"}},1332:function(e,t,a){var n=a(1333)(function(e,t){return e+t},0);e.exports=n},1333:function(e,t,a){var r=a(1334),c=a(641);e.exports=function(n,o){return function(e,t){var a;if(void 0===e&&void 0===t)return o;if(void 0!==e&&(a=e),void 0!==t){if(void 0===a)return t;t="string"==typeof e||"string"==typeof t?(e=c(e),c(t)):(e=r(e),r(t)),a=n(e,t)}return a}}},1334:function(e,t,a){var n=a(237);e.exports=function(e){return"number"==typeof e?e:n(e)?NaN:+e}},1335:function(e,t){
/*!
 * array-to-sentence | MIT (c) Shinnosuke Watanabe
 * https://github.com/shinnn/array-to-sentence
*/
e.exports=function(e,t){"use strict";if(!Array.isArray(e))throw new TypeError(String(e)+" is not an array. Expected an array.");function a(e){if("string"!=typeof t[e])throw new TypeError(String(t[e])+" is not a string. `"+e+"` option must be a string.")}return void 0===(t=t||{}).separator?t.separator=", ":a("separator"),void 0===t.lastSeparator?t.lastSeparator=" and ":a("lastSeparator"),0===e.length?"":1===e.length?e[0]:e.slice(0,-1).join(t.separator)+t.lastSeparator+e[e.length-1]}},1336:function(e,t,a){e.exports={truncate:"_1ByhS",resetBtn:"DWLeW",containerTruncated:"_3PLD4",text:"KNDj7",textNotTruncated:"_2FfeD",textTruncated:"b5rtm _1ByhS",toggleButton:"_19oEl DWLeW",expandButton:"_2mJKr"}},1338:function(e,t,a){e.exports={colorGrey:"#999",colorLightBlack:"#111",descriptionExpanded:"_2tqNT",descriptionTruncationNotRequired:"_1fn3S",descriptionTruncated:"_3kvp0"}},1340:function(e,t,a){e.exports={smallFontSize:"12px",outerHorizontalGutter:"16px",innerHorizontalGutter:"8px",cellPadding:"calc(8px / 2)",spacingUnit:"4px",colorLightBlack:"#111",truncate:"_1ByhS",fontWeightMedium:"xLon9",resetBtn:"DWLeW",container:"_1ltEq",cell:"_3dxKb",halfCell:"_3kEvh",textContainer:"_2DxLe _3kEvh",textContainerNotTruncated:"gfzKD",textContainerTruncated:"OD7Kw",textContainerItem:"_28uSB _3kEvh",locationLink:"_2RL3a xLon9",locationIcon:"_15of1",locationTitle:"_20NLS _1ByhS",button:"_3JXJ6",buttonIcon:"_1rYbs",buttonText:"_1efgd",smallButton:"ldOpn"}},1344:function(e,t,a){e.exports={fontWeightNormal:"_27Bp2",clearfix:"_2KLco",gutterContainer:"_2npM8",contentContainer:"_1zDIT _2npM8",heading:"_1-q17 _2npM8 _27Bp2"}},1346:function(e,t,a){"use strict";var n=a(74),o=a(643)(!1);n(n.P,"String",{codePointAt:function(e){return o(this,e)}})},1347:function(e,t,a){var n=a(1348),o=a(184);e.exports=function(e){return e&&e.length?n(e,o):0}},1348:function(e,t){e.exports=function(e,t){for(var a,n=-1,o=e.length;++n<o;){var r=t(e[n]);void 0!==r&&(a=void 0===a?r:a+r)}return a}},1349:function(e,t,a){e.exports={containerLayout:"PrOBO",wrapper:"WMwuA",container:"_1OYbO PrOBO",stickyHeaderContainer:"_33qjA",spinnerWrapper:"xn9xU"}},1351:function(e,t,a){e.exports={modalContent:"_29NeT"}},1353:function(e,t,a){e.exports={colorGrey:"#999",fontWeightMedium:"xLon9",lineHeightTitle:"U8wGh",lineHeightCopy:"_13hUA",containerPaddingUnit:"16px",cellPaddingUnit:"8px",headerFontSize:"21px",smallFontSize:"12px",placeholderBackground:"_2VWD4",container:"_11so1",cell:"_3aBA9",col:"Rs1Ko",containerTitle:"_3dtte _11so1",containerFooter:"_2qSy1 _11so1",title:"_2dIZQ U8wGh",datePublished:"_1vScU",p:"_5UTXm",stats:"_19Kkj _11so1",stat:"_1H3Tk _3aBA9 Rs1Ko",statLabel:"_2FiKI",statLabelIcon:"_2nkiz",statLabelText:"B5nBa xLon9",statValue:"_2zoGD",statValueTotal:"_20G9q _13hUA",statValueDelta:"_3R4g7",metadataItemName:"_24YMC",hr:"_1CXhw",metadata:"_1Z2CJ _11so1",metadataItem:"_1XYV- _3aBA9 Rs1Ko",metadataItemValue:"_3Dok4",statValueTotalPlaceholder:"_19b04 _2VWD4",statValueDeltaPlaceholder:"_2rDWN _2VWD4"}},1355:function(e,t,a){e.exports={spacingUnit:"4px",containerPaddingUnit:"calc(4px * 4)",cellPaddingUnit:"calc(4px * 2)",container:"_1OFta",cell:"_1EBGx"}},648:function(e,t,a){"use strict";a.r(t);a(19),a(20),a(14),a(29),a(33),a(126);var I=a(2),n=a(1332),r=a.n(n),o=a(4),m=a.n(o),c=a(1),i=a.n(c),s=a(0),v=a.n(s),l=a(16),u=a(347),d=a(357),p=a(1492),f=a(1496),h=a(417),b=a(6),g=a(55);var y=function(){function e(e,t){this.predicate=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new O(e,this.predicate,this.source))},e}(),O=function(o){function e(e,t,a){var n=o.call(this,e)||this;return n.predicate=t,n.source=a,n.count=0,n.index=0,n}return b.a(e,o),e.prototype._next=function(e){this.predicate?this._tryPredicate(e):this.count++},e.prototype._tryPredicate=function(e){var t;try{t=this.predicate(e,this.index++,this.source)}catch(e){return void this.destination.error(e)}t&&this.count++},e.prototype._complete=function(){this.destination.next(this.count),this.destination.complete()},e}(g.a),_=a(1498),E=a(362);var S=a(1489),w=a(346),j=a(1488),R=a(1491),T=a(1506),N=a(1513),P=a(7),D=a(54),C=a(17),k=a(138),x=a(63),L=a(28),U=a(191),A=a(186),B=a(985),M=a(440),F=a(8),W=a(203),q=a(548),z=a(32),H=a(45),Z=a(22),G=a(10),V=a.n(G),K=a(202),Y=a.n(K),J=a(1013),X=a.n(J),Q=(a(137),a(1335)),$=a.n(Q),ee=a(155),te=a.n(ee),ae=a(170),ne=a.n(ae),oe=a(265),re=a.n(oe),ce=a(1028),ie=a(125);function se(e){var t=re()(e,ce.c).map(function(e){return e.title});return $()(t)}function le(e,t){var a=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).cleanVersion,n=void 0!==a&&a,o=[n?"Download this photo":"Download this free HD photo"];if(t.tags&&!n){var r=se(t.tags);o.push("of",r)}if(ne()(t,"location.city")||ne()(t,"location.country")){var c=[t.location.city,t.location.country].filter(function(e){return!!e}).join(", ");o.push("in ".concat(c))}return o.push("by ".concat(e.name," (@").concat(e.username,")")),o.join(" ")}function ue(e){var t,a,n,o,r=e.user,c=function(e,t){var a=ne()(t,"story.title"),n="photo by ".concat(e.name," (@").concat(e.username,") on Unsplash");if(a)return te()("".concat(a," ").concat(n));if(Object(H.d)(t)){var o=se(t.tags);return te()("".concat(o," HD ").concat(n))}return"HD ".concat(n)}(r,e),i=le(r,e),s=(a=(t=e).id,n=t.slug,o=n?"".concat(a,"/").concat(n):a,"https://unsplash.com/photos/".concat(o)),l=le(r,e,{cleanVersion:!0});return Object(ie.g)({userOption:I.a.some(r),photoOption:I.a.some(e),title:c,description:i,socialDescriptionOption:I.a.some(l),canonicalUrl:s})}var me=a(341),de=a(267),pe=a(1126),fe=a(805),he=a(171),be=a(360),ge=a(1110),ve=a(1109),ye=a(48),Oe=a(1131),_e=a(221),Ie=a(129),Ee=a(5),Se=a(1336),we=a.n(Se);function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=Object(Ee.unionize)({NotRequired:Object(Ee.ofType)(),Truncated:Object(Ee.ofType)(),Expanded:Object(Ee.ofType)()}),Ce=function(e){function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=Te(this,Ne(a).call(this,e))).updateRef=function(e){t.textElRef=e},t.state=t.getInitialState(),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(a,s["PureComponent"]),t=a,(n=[{key:"getInitialState",value:function(){return{doesRequireTruncation:!0,shouldForceTruncation:!0}}},{key:"componentDidMount",value:function(){var e,t,a=this,n=(t=I.a.of(a.textElRef).get(),(e=t).offsetWidth<e.scrollWidth);this.setState({doesRequireTruncation:n,shouldForceTruncation:!1})}},{key:"render",value:function(){var e,t,a,n,o,r,c,i=this.props,s=i.text,l=i.containerClassNameTruncated,u=i.containerClassNameExpanded,m=i.containerClassNameTruncationNotRequired,d=(e=this.props,t=this.state,a=e.onRequestToggle,n=e.shouldTruncateIfRequired,o=e.shouldShowTruncateButtonWhenExpanded,r=t.doesRequireTruncation,c=t.shouldForceTruncation,r?c||n?De.Truncated({onRequestToggle:a}):De.Expanded({onRequestToggle:a,shouldShowTruncateButton:o}):De.NotRequired({})),p=De.match({Truncated:function(e){var t=e.onRequestToggle;return I.a.some({buttonText:"Read more",onRequestToggle:t})},Expanded:function(e){var t=e.onRequestToggle;return e.shouldShowTruncateButton?I.a.some({buttonText:"Show less",onRequestToggle:t}):I.a.none()},NotRequired:function(){return I.a.none()}})(d);return v.a.createElement("div",{className:V()(we.a.container,De.match({Truncated:function(){return[we.a.containerTruncated,l]},Expanded:function(){return[u]},NotRequired:function(){return[m]}})(d))},v.a.createElement("p",{ref:this.updateRef,className:V()(we.a.text,De.match({Truncated:function(){return we.a.textTruncated}},function(){return we.a.textNotTruncated})(d))},s)," ",p.map(function(e){var t=e.buttonText,a=e.onRequestToggle;return v.a.createElement("button",{className:we.a.toggleButton,onClick:a},t)}).orUndefined())}}])&&Re(t.prototype,n),o&&Re(t,o),a}();Ce.displayName="TruncatedTextToggle";var ke=Ce,xe=a(1338),Le=a.n(xe),Ue=Object(Ie.progressivelyEnhance)(function(e){var t=e.description,a=e.shouldTruncate,n=e.onRequestToggleTruncation;return v.a.createElement(ke,{key:t,text:t,containerClassNameTruncationNotRequired:Le.a.descriptionTruncationNotRequired,containerClassNameExpanded:Le.a.descriptionExpanded,containerClassNameTruncated:Le.a.descriptionTruncated,shouldTruncateIfRequired:a,shouldShowTruncateButtonWhenExpanded:!1,onRequestToggle:n})}),Ae=a(1340),Be=a.n(Ae),Me=function(e){return v.a.createElement("div",{className:Be.a.textContainerItem},e)},Fe=function(e){var t=e.photo,a=e.location,n=e.shouldTruncateDescription,o=e.onRequestToggleTruncatedDescription,r={pathname:Object(_e.b)({photoId:t.id}),state:a.state},c={pathname:Object(_e.c)({photoId:t.id}),state:a.state},i=Object(H.d)(t)?I.a.of(t.story.description):I.a.none(),s=Object(H.d)(t)?I.a.of(t.location).map(function(e){return e.title}):I.a.none(),l={url:t.links.html,title:I.a.of(t.description).getOrElse(""),text:Object(be.b)(t.user)};return v.a.createElement("div",{className:Be.a.container},v.a.createElement("div",{className:Be.a.textContainer},s.map(function(e){return v.a.createElement(fe.a,{to:Object(he.b)(e),className:Be.a.locationLink},v.a.createElement(ve.a,{className:Be.a.locationIcon}),v.a.createElement("span",{className:Be.a.locationTitle},e))}).map(Me).orUndefined(),i.map(function(e){return v.a.createElement(Ue,{description:e,shouldTruncate:n,onRequestToggleTruncation:o})}).map(Me).orUndefined()),v.a.createElement("div",{className:Be.a.cell},v.a.createElement(Oe.a,{shareLocationDescriptor:c,shareOptions:l,className:Be.a.smallButton})),v.a.createElement("div",{className:Be.a.cell},v.a.createElement(ye.a,{className:Be.a.button,tag:"link",buttonType:"outline",buttonSize:"small",to:r},v.a.createElement(ge.a,{className:Be.a.buttonIcon}),v.a.createElement("span",{className:Be.a.buttonText},"Info"))))};Fe.displayName="Footer";var We=Fe,qe=a(1127),ze=a(1133),He=a(1134),Ze=a(1037),Ge=a(11),Ve=a(1083),Ke=a(1044),Ye=a(1111),Je=a.n(Ye),Xe=Object(Ge.createSelector)(function(e,t){return t},function(e){return Object(Ve.a)({photo:e,className:Je.a.secondaryLabel}).getOrElse(Ke.a.Username({}))}),Qe=Object(l.connect)(function(e,t){return{secondaryLabel:Xe(e,t.photo)}})(function(e){var t=e.className,a=e.location,n=e.photo,o=e.isLoggedIn,r=e.secondaryLabel,c=o?void 0:"green",i=o?"Download":"Download free";return v.a.createElement("header",{className:V()(t,Je.a.container)},v.a.createElement("div",{className:Je.a.photographer},v.a.createElement(Ze.a,{includeAvatar:!0,userId:n.user.id,secondaryLabel:r,type:"emphasiseUsername"})),v.a.createElement("div",{className:Je.a.actions},v.a.createElement("div",{className:Je.a.buttonCell},v.a.createElement(He.a,{photoId:n.id,location:a})),v.a.createElement("div",{className:Je.a.buttonCell},v.a.createElement(qe.a,{photoId:n.id,location:a})),v.a.createElement("div",{className:Je.a.downloadButtonCell},v.a.createElement(ze.a,{photoId:n.id,showLabel:!0,type:c,label:i,className:Je.a.downloadButton}))))}),$e=a(446),et=a(24),tt=Object(et.a)("M19 3v3h4.8l-4.4 4.5 2 2L26 8.2v5h3V3M6 24v-4.6H3V29h9.6v-3H8l5-5-2-2"),at=Object(et.a)("M3 19v3h4.8l-4.4 4.5 2 2L10 24v5h3V19m9-11V3.4h-3V13h9.6v-3H24l5-5-2-2"),nt=a(1045),ot=(a(84),a(85),a(53),a(18)),rt=a(441),ct=a(270),it=a(1095),st=a(1143),lt=a.n(st);function ut(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var mt=Object(Ee.unionize)({Unenhanced:Object(Ee.ofType)(),Enhanced:Object(Ee.ofType)()}),dt=function(e){var t,a,n,o=e.magicalVerticalOffset,r=function(){var e=Object(rt.g)(10),t=20+o,a=Object(rt.i)(Ye.outerHorizontalGutter);return{TOTAL_HORIZONTAL_PADDING:2*a,TOTAL_VERTICAL_PADDING:t,HORIZONTAL_PADDING_LENGTH:Object(rt.g)(a),VERTICAL_PADDING_LENGTH:e}},b=Object(rt.d)(1),c=r(),g=c.TOTAL_HORIZONTAL_PADDING,v=c.TOTAL_VERTICAL_PADDING,i=(t=r(),a=t.TOTAL_HORIZONTAL_PADDING,n=t.TOTAL_VERTICAL_PADDING,{IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH:Object(rt.a)("".concat(b," - ").concat(Object(rt.g)(a))),IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH:Object(rt.a)("".concat("100vh"," - ").concat(Object(rt.g)(n)))}),y=i.IMAGE_WIDTH_CONSTRAINED_TO_VIEWPORT_WIDTH_LENGTH,s=i.IMAGE_HEIGHT_CONSTRAINED_TO_VIEWPORT_HEIGHT_LENGTH,O=function(e){var t,a=e.photoDimensions;if(Object(it.b)(a)){var n=a.width/a.height;return t=500,Math.ceil(t*n)}return 500},_=function(e){var t,a=e.photoDimensions,n=a.width/a.height,o=O({photoDimensions:a});return{minWidthLength:Object(rt.g)(o),maxWidthLength:(t=s,Object(rt.a)("(".concat(t,") * ").concat(Object(ct.e)(n))))}},l=function(e){var t,a,n,o,r,c,i,s,l,u=e.photoDimensions;if(e.isZoomedOut){var m=_({photoDimensions:u}),d=m.minWidthLength,p=m.maxWidthLength,f=(a={photoDimensions:u}.photoDimensions,n=a.width,o=a.height,r=o/n,c=O({photoDimensions:a}),t=c,i=Math.ceil(t*r),s=["(max-width: ".concat(Object(rt.g)(c+g),")"),"(max-height: ".concat(Object(rt.g)(i+v),")")],l="".concat(n,"/").concat(o),{isMinSizeMediaConditions:s,isConstrainedByViewportHeightMediaCondition:"(min-aspect-ratio: ".concat(l,")")}),h=f.isConstrainedByViewportHeightMediaCondition;return ut(f.isMinSizeMediaConditions.map(function(e){return{mediaCondition:e,width:d}})).concat([{mediaCondition:h,width:p},{width:y}])}return[{width:b}]},u=m()(function(e){var t=e.photoDimensions,a=e.zoomableOptions;return ut([{mediaCondition:st.isFixedMediaCondition,width:b}]).concat(ut(l({photoDimensions:t,isZoomedOut:a.isZoomedOut})))},$e.d);return{getPaddingConstants:r,getImgSrcSetString:function(e){var t,a,n,o,r=e.photoDimensions,c=e.baseUrl,i=r.width,s=(a=r,n=a.width,o=n/a.height,{lowerBound:(t=500,Math.ceil(t*o)),upperBound:n}),l=s.lowerBound,u=s.upperBound;return Object($e.c)({baseUrl:c,lowerBound:l,upperBound:u,originalWidth:i,interval:300,getParams:I.a.some(function(){return{q:80}})})},getMinAndMaxWidthsLengths:_,getImgSizesString:u,createFallbackSrc:function(e){return Object(ot.a)({url:e,width:String(1e3),q:"80"})}}};function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ft(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ht(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e,t){return(gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=function(e){function t(e){var g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(g=ht(this,bt(t).call(this,e))).renderZoomableImageOverlay=function(e){var t=e.isZoomedOut?tt:at;return v.a.createElement("div",{className:lt.a.overlay},v.a.createElement("div",{className:lt.a.overlayChild},v.a.createElement(t,{className:lt.a.zoomToggleIcon})))},g.renderImage=function(){var e=g.props,t=e.photo,a=e.maybeInitialSrc,n=e.onImgLoad,o=e.magicalVerticalOffset,r=e.renderType,c=g.state.shouldUseInitialSrcIfAvailable,i=t.urls.raw,s=dt({magicalVerticalOffset:o}),l=s.getImgSizesString,u=s.getImgSrcSetString,m=s.createFallbackSrc,d={width:t.width,height:t.height},p=l({zoomableOptions:r.zoomable,photoDimensions:d}),f=function(){return u({photoDimensions:d,baseUrl:i})},h=c?a.map(function(e){return Object($e.e)([{url:e}])}).getOrElseL(f):f(),b=m(i);return v.a.createElement(nt.a,{imgDimensions:t,containerClassName:lt.a.imagePlaceholder,key:t.id,sizes:p,srcSet:h,onLoad:n,src:b,alt:I.a.of(t.description).orUndefined()})},g.renderZoomableImageButton=function(e){var t=e.isZoomedOut,a=e.onRequestToggleZoom,n=V()(lt.a.imageButton,t?lt.a.imageButtonZoomedOut:lt.a.imageButtonZoomedIn);return v.a.createElement("button",{className:n,onClick:a},g.renderZoomableImageOverlay(e),g.renderImage())},g.renderZoomableImageContainer=function(){var e=g.props,t=e.photo,a=e.magicalVerticalOffset,n=e.renderType,o=dt({magicalVerticalOffset:a}),r=o.getMinAndMaxWidthsLengths,c=o.getPaddingConstants,i=n.zoomable.isZoomedOut,s=c(),l=s.HORIZONTAL_PADDING_LENGTH,u=s.VERTICAL_PADDING_LENGTH,m=r({photoDimensions:{width:t.width,height:t.height}}),d=m.minWidthLength,p=m.maxWidthLength;return v.a.createElement("div",{style:i?{padding:"".concat(u," ").concat(l)}:{}},v.a.createElement("div",{style:i?{minWidth:d,maxWidth:p}:{},className:lt.a.imageContainer},mt.match({Unenhanced:g.renderImage,Enhanced:function(e){return g.renderZoomableImageButton(e.zoomable)}})(n)))},g.state=g.getInitialState(),g}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gt(e,t)}(t,s["PureComponent"]),a=t,(n=[{key:"getInitialState",value:function(){return{shouldUseInitialSrcIfAvailable:!0}}},{key:"componentDidMount",value:function(){var e=this;requestAnimationFrame(function(){requestAnimationFrame(function(){e.disableInitialSrc()})})}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.photo;e.photo.id!==t.id&&this.setState(this.getInitialState)}},{key:"componentDidUpdate",value:function(){var e=this;this.state.shouldUseInitialSrcIfAvailable&&requestAnimationFrame(function(){requestAnimationFrame(function(){e.state.shouldUseInitialSrcIfAvailable&&e.disableInitialSrc()})})}},{key:"disableInitialSrc",value:function(){this.setState({shouldUseInitialSrcIfAvailable:!1})}},{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:lt.a.isFixed},this.renderImage()),v.a.createElement("div",{className:lt.a.isZoomable},this.renderZoomableImageContainer()))}}])&&ft(a.prototype,n),o&&ft(a,o),t}(),yt=a(1135),Ot=a(1061),_t=a(1092),It=a(1034),Et=a(1344),St=a.n(Et),wt=Object(_t.a)(It.b),jt=It.a.Multi({shouldUseContainerPadding:!1}),Rt=function(e){var t=e.photoIdsRemoteData,a=function(e){var t=e.bodyPhotoIdsRemoteData;return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:St.a.clearfix},v.a.createElement("h4",{className:St.a.heading},"Related photos")),v.a.createElement("div",{className:St.a.contentContainer},function(e){var t=e.bodyPhotoIdsRemoteData;switch(t.type){case Z.f.Reloading:case Z.f.Success:return v.a.createElement(wt,{photoIds:t.value,mode:jt});case Z.f.Loading:return v.a.createElement(de.a,{padContentBelow:!1})}}({bodyPhotoIdsRemoteData:t})))};switch(t.type){case Z.f.Reloading:case Z.f.Loading:return a({bodyPhotoIdsRemoteData:t});case Z.f.Success:return 0===t.value.length?null:a({bodyPhotoIdsRemoteData:t});case Z.f.Failure:case Z.f.NotAsked:return null}},Tt=(a(1346),a(454),a(1347)),Nt=a.n(Tt),Pt=a(43),Dt=a(343),Ct=a(62),kt=a(13);function xt(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var Lt=xt(Dt.e.map(function(e){return{title:e.title,linkUrl:e.url}})).concat([{title:"Free pictures",linkUrl:Ct.d}]),Ut=function(e){var t=e.originalPhotoTags,a=e.isLoggedIn;return 4<t.length&&!a},At=m()(function(e){return e.split("").map(function(e){return I.a.of(e.codePointAt(0)).get()})},Nt.a),Bt=function(e){var t,a,n,o,r=e.photoId;return a=(t={str:r,array:Lt}).str,n=t.array,o=At(a)%n.length,Object(kt.c)(o,n).get()},Mt=function(e){var t,a,n=e.originalPhotoTags,o=e.photoId,r=e.isLoggedIn,c=Object(Pt.a)([(t={photoId:o},a=t.photoId,m()(Ut,function(e){return e?I.a.some(Bt({photoId:a})):I.a.none()})({originalPhotoTags:n,isLoggedIn:r}))]);return xt(re()(n,ce.b)).concat(xt(c))},Ft=function(e){var t=e.type===H.a.related?"Related collections":"Featured in ".concat(e.total," collections"),a=e.results.map(function(e){return e.id});return v.a.createElement(yt.a,{relatedCollectionIds:a,heading:t})},Wt=Object(x.c)()(function(e,t){return{isLoggedIn:Object(z.k)(e)}}),qt=Object(l.connect)(Wt)(function(e){var a=e.photo,t=e.relatedPhotoIdsRemoteData,n=e.isLoggedIn,o=I.a.of(Object(H.d)(a)?a.related_collections:void 0),r=Object(H.d)(a)?I.a.some(a.tags):I.a.none();return v.a.createElement(v.a.Fragment,null,v.a.createElement(Rt,{photoIdsRemoteData:t}),o.map(Ft).getOrElse(void 0),r.map(function(e){var t=Mt({originalPhotoTags:e,photoId:a.id,isLoggedIn:n});return v.a.createElement(Ot.a,{headingCopy:"Related tags",tags:t,showHeading:!0,maximumResultsCount:1/0})}).orUndefined())}),zt=a(1349),Ht=a.n(zt),Zt=function(e){var t,o=e.location,a=e.maybeCachedPhoto,n=e.photoFullInfoRemoteData,r=e.maybeMainImageInitialSrc,c=e.relatedPhotoIdsRemoteData,i=e.onMainImageLoad,s=e.shouldTruncateDescription,l=e.onRequestToggleTruncatedDescription,u=e.isLoggedIn,m=e.children,d=e.mainImageRenderType,p=function(e){var t=e.photo,a=Object(C.c)(o),n=a?155:200;return v.a.createElement("div",{className:Ht.a.wrapper},v.a.createElement(Y.a,Object.assign({},ue(t))),v.a.createElement("div",null,v.a.createElement("div",{className:V()(a&&Ht.a.stickyHeaderContainer)},v.a.createElement(Qe,{photo:t,location:o,isLoggedIn:u})),v.a.createElement(pe.a,{photoId:t.id},v.a.createElement(vt,{renderType:d,maybeInitialSrc:r,photo:t,onImgLoad:i,magicalVerticalOffset:n})),v.a.createElement(We,{photo:t,location:o,shouldTruncateDescription:s,onRequestToggleTruncatedDescription:l})),v.a.createElement("div",{className:Ht.a.container},v.a.createElement(qt,{photo:t,relatedPhotoIdsRemoteData:c})))},f=a.filter(H.c).map(function(e){return p({photo:e})}).getOrElseL(function(){switch(n.type){case Z.f.Reloading:case Z.f.Success:return p({photo:n.value});case Z.f.Loading:return v.a.createElement("div",{className:Ht.a.spinnerWrapper},v.a.createElement(de.a,{padContentBelow:!1}));case Z.f.NotAsked:case Z.f.Failure:return null}});return t=f,v.a.createElement("div",{"data-test":me.l},t,m)};Zt.displayName="Photos";var Gt,Vt,Kt=X()(Zt),Yt=a(215),Jt=a(1351),Xt=a.n(Jt),Qt=function(e){return{backgroundImage:["linear-gradient(hsla(0, 0%, 100%, 0.8), white 150px)",Object(ot.w)(e)].join(", ")}},$t=function(e){var t,a,n,o=e.maybeRawPhotoUrl,r=e.maybeMainImageCurrentSrc;return(t={maybeRawPhotoUrl:o,maybeMainImageCurrentSrc:r},a=t.maybeRawPhotoUrl,n=t.maybeMainImageCurrentSrc,a.map(function(e){return Object(ot.a)({url:e,width:String(200),blur:String(20)})}).orElse(n)).map(Qt).orUndefined()},ea=function(e){var t=e.photoId,a=e.maybeRawPhotoUrl,n=e.maybeMainImageCurrentSrc,o=e.modalLocationState,r=e.children;return v.a.createElement(Yt.a,{redirectTo:{pathname:"/photos/".concat(t)},modalLocationState:o,contentStyles:$t({maybeRawPhotoUrl:a,maybeMainImageCurrentSrc:n}),contentClassName:Xt.a.modalContent},r)},ta=a(1057),aa=Object(et.a)("M27.5 18.08a1 1 0 0 0-1.42 0l-9.08 8.59v-23.67a1 1 0 0 0-2 0v23.67l-9.08-8.62a1 1 0 1 0-1.38 1.45l10.77 10.23a1.19 1.19 0 0 0 .15.09.54.54 0 0 0 .16.1.94.94 0 0 0 .76 0 .54.54 0 0 0 .16-.1l.15-.09 10.77-10.23a1 1 0 0 0 .04-1.42z"),na=Object(et.a)("M31.8 15.1l-.2-.4c-3.5-6.9-9.7-11.5-15.6-11.5-6.3 0-12.3 4.5-15.7 11.7l-.2.4c-.2.5-.2 1.1 0 1.6l.2.4c3.6 7 9.7 11.5 15.6 11.5 6.3 0 12.3-4.5 15.6-11.6l.2-.4c.4-.5.4-1.2.1-1.7zm-2 1.2c-3 6.5-8.3 10.5-13.8 10.5-5.2 0-10.6-4.1-13.8-10.4l-.2-.4.1-.3c3.1-6.5 8.4-10.5 13.9-10.5 5.2 0 10.6 4.1 13.8 10.4l.2.4-.2.3zm-13.8-6.6c-3.5 0-6.3 2.8-6.3 6.3s2.8 6.3 6.3 6.3 6.3-2.8 6.3-6.3-2.8-6.3-6.3-6.3zm0 10.6c-2.4 0-4.3-1.9-4.3-4.3s1.9-4.3 4.3-4.3 4.3 1.9 4.3 4.3-1.9 4.3-4.3 4.3z"),oa=Object(et.a)("M28.7 5.5c-1.6-1.5-3.6-2.4-5.7-2.4s-4.2.8-5.7 2.4l-1.3 1.6-1.3-1.6c-1.5-1.5-3.6-2.4-5.7-2.4s-4.1.9-5.7 2.4c-3.1 3.1-3.1 8.2 0 11.4l10.8 11.1c.5.5 1.2.8 1.9.8s1.4-.3 1.9-.8l10.7-11.2c3.2-3.1 3.2-8.2.1-11.3zm-1.5 10l-10.7 11.1c-.1.1-.3.2-.5.2s-.4-.1-.5-.2l-10.7-11.1c-2.3-2.4-2.3-6.2 0-8.5 1.1-1.2 2.6-1.9 4.2-1.9s3.1.6 4.2 1.7l2.8 3.4 2.7-3.4c1.1-1.1 2.6-1.8 4.2-1.8s3.1.6 4.2 1.8c2.5 2.5 2.5 6.3.1 8.7z"),ra=a(25),ca=function(e){return"Æ/".concat(e)},ia=function(e){return"".concat(e,"s")},sa=function(e){return"".concat(e,"mm")},la=a(1353),ua=a.n(la);(Vt=Gt||(Gt={}))[Vt.views=0]="views",Vt[Vt.downloads=1]="downloads",Vt[Vt.likes=2]="likes";var ma=function(){return v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement(de.a,{padContentBelow:!1})))},da=function(e){var t=e.type,a=e.statRemoteData,n=function(e){switch(e){case Gt.views:return na;case Gt.downloads:return aa;case Gt.likes:return oa}}(t);return v.a.createElement("div",{className:ua.a.stat},v.a.createElement("dt",{className:ua.a.statLabel},v.a.createElement(n,{className:ua.a.statLabelIcon}),v.a.createElement("span",{className:ua.a.statLabelText},function(e){switch(e){case Gt.views:return"Views";case Gt.downloads:return"Downloads";case Gt.likes:return"Likes"}}(t))),function(e){var t=e.statRemoteData;switch(t.type){case Z.f.Success:var a=t.value;return v.a.createElement("dd",{className:ua.a.statValue},v.a.createElement("span",{className:ua.a.statValueTotal},Object(ot.h)(a.total)),v.a.createElement("span",{className:ua.a.statValueDelta},Object(ot.j)(a.historical.change)," since last month"));case Z.f.Loading:return v.a.createElement("dd",{className:ua.a.statValue},v.a.createElement("div",{className:ua.a.statValueTotalPlaceholder}),v.a.createElement("div",{className:ua.a.statValueDeltaPlaceholder}))}}({statRemoteData:a}))},pa=function(e){return v.a.createElement("dl",{className:ua.a.stats},da({type:Gt.views,statRemoteData:e.views}),da({type:Gt.downloads,statRemoteData:e.downloads}),da({type:Gt.likes,statRemoteData:e.likes}))},fa=function(e){var t=e.maybeCachedPhotoStats,a=e.photoStatsRemoteData;return t.map(function(e){return pa({views:new Z.e(e.views),downloads:new Z.e(e.downloads),likes:new Z.e(e.likes)})}).orElseL(function(){switch(a.type){case Z.f.NotAsked:return I.a.none();case Z.f.Failure:return I.a.some((a.value,v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement("p",{className:ua.a.p},"Sorry, there was an error loading stats. Please try again later.")))));case Z.f.Reloading:case Z.f.Success:var e=a.value;return I.a.some(pa({views:new Z.e(e.views),downloads:new Z.e(e.downloads),likes:new Z.e(e.likes)}));case Z.f.Loading:return I.a.some(pa({views:new Z.b,downloads:new Z.b,likes:new Z.b}))}})},ha=function(e){var t,a,n=e.photo,o=(a={photo:n}.photo,[{name:"Camera Make",value:(t=a.exif.make,""!==t?t:void 0)},{name:"Camera Model",value:Object(ra.h)(a.exif.model)},{name:"Focal Length",value:Object(ra.f)(sa,Object(ra.h)(a.exif.focal_length))},{name:"Aperture",value:Object(ra.f)(ca,Object(ra.h)(a.exif.aperture))},{name:"Shutter Speed",value:Object(ra.f)(ia,Object(ra.h)(a.exif.exposure_time))},{name:"ISO",value:Object(ra.h)(a.exif.iso)},{name:"Dimensions",value:"".concat(a.width," Ã ").concat(a.height)}].map(function(e){var t=e.name,a=e.value;return{name:t,value:Object(ra.c)(function(){return"--"},a)}}));return v.a.createElement("dl",{className:ua.a.metadata},o.map(function(e){var t=e.name,a=e.value;return v.a.createElement("div",{key:t,className:ua.a.metadataItem},v.a.createElement("dt",{className:ua.a.metadataItemName},t),v.a.createElement("dd",{className:ua.a.metadataItemValue},a))}))},ba=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData;return Object(H.d)(t)?I.a.some(ha({photo:t})):function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return I.a.some(ha({photo:a.value}));case Z.f.Loading:return I.a.some(ma());case Z.f.NotAsked:return I.a.none();case Z.f.Failure:return I.a.some((a.value,v.a.createElement("div",{className:ua.a.container},v.a.createElement("div",{className:ua.a.cell},v.a.createElement("p",{className:ua.a.p},"Sorry, there was an error loading metadata. Please try again later.")))))}}()},ga=function(e){var t=e.auth,a=e.photo,n=(I.a.of(t.user).exists(function(e){return e.username===a.user.username})?I.a.some("/account/photos"):t.isAdmin?I.a.some("/super/photos/".concat(a.id,"/edit")):I.a.none()).map(function(e){return v.a.createElement("a",{href:e},"Edit photo")});return Object(ta.c)({render:function(e){return v.a.createElement("div",{className:ua.a.containerFooter},e)},renderItem:function(e){return v.a.createElement("div",{className:ua.a.cell},e)}})([{key:"edit-photo",maybeEl:n}])},va=function(e){var t=e.cachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth,r=Object(ot.g)(new Date(t.created_at)),c=Object(H.e)(t)?I.a.some(t.stats):I.a.none(),i=Object(H.d)(t)?I.a.some(I.a.of(t.story.title).getOrElseL(function(){return"Info"})):I.a.none(),s=Object(ta.b)({render:function(e){return e}})([{key:"stats",maybeEl:fa({maybeCachedPhotoStats:c,photoStatsRemoteData:n})},{key:"metadata",maybeEl:ba({cachedPhoto:t,photoFullInfoRemoteData:a})},{key:"other-links",maybeEl:ga({photo:t,auth:o})}]);return v.a.createElement(v.a.Fragment,null,v.a.createElement("div",{className:ua.a.containerTitle},v.a.createElement("div",{className:ua.a.cell},i.map(function(e){return v.a.createElement("h2",{className:ua.a.title},e)}).orNull(),v.a.createElement("span",{className:ua.a.datePublished},"Published on ",v.a.createElement("time",{dateTime:t.created_at},r)))),Object(ta.a)(s,function(e){return v.a.createElement("hr",{key:"separator-".concat(e),className:ua.a.hr})}))},ya=Object(l.connect)(function(e,t){return{auth:Object(z.c)(e)}})(function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData,n=e.photoStatsRemoteData,o=e.auth;return t.filter(H.c).map(function(e){return va({cachedPhoto:e,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a})}).getOrElseL(function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return va({cachedPhoto:a.value,photoStatsRemoteData:n,auth:o,photoFullInfoRemoteData:a});case Z.f.Loading:return ma();case Z.f.NotAsked:case Z.f.Failure:return null}})}),Oa=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,c=e.modalLocationState,i=t.filter(H.c).map(function(e){return e.urls.raw});return v.a.createElement(ea,{photoId:a,modalLocationState:c,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:i},v.a.createElement(ya,{maybeCachedPhoto:t,photoFullInfoRemoteData:o,photoStatsRemoteData:r}))},_a=a(51),Ia=a(86),Ea=a(21),Sa=a(216),wa=a(1132),ja=a(1355),Ra=a.n(ja),Ta=function(e){var t=e.photo,a=t.links.html,n=function(e){return Object(Ea.h)(a,{utmSource:e,utmContent:_a.h.PHOTOS_PAGE_SHARE})},o=Object(be.b)(t.user),r=Object(Ia.d)(t.urls.raw)({w:2e3}),c=[{url:n("facebook"),type:Sa.a.facebook({})},{url:n("pinterest"),type:Sa.a.pinterest({message:o,media:r})},{url:n("twitter"),type:Sa.a.twitter({message:o})},{url:n("email"),type:Sa.a.email({})}];return v.a.createElement(wa.a,{title:"Photo by ".concat(t.user.name),buttonsShareProps:c,link:a})},Na=function(e){var t=e.maybeCachedPhoto,a=e.photoFullInfoRemoteData;return t.filter(H.c).map(function(e){return Ta({photo:e})}).getOrElseL(function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return Ta({photo:a.value});case Z.f.Loading:return v.a.createElement("div",{className:Ra.a.container},v.a.createElement("div",{className:Ra.a.cell},v.a.createElement(de.a,{padContentBelow:!1})));case Z.f.NotAsked:case Z.f.Failure:return null}})},Pa=function(e){var t=e.maybeCachedPhoto,a=e.photoId,n=e.maybeMainImageCurrentSrc,o=e.photoFullInfoRemoteData,r=e.modalLocationState;return v.a.createElement(ea,{photoId:a,modalLocationState:r,maybeMainImageCurrentSrc:n,maybeRawPhotoUrl:t.filter(H.c).map(function(e){return e.urls.raw})},v.a.createElement(Na,{maybeCachedPhoto:t,photoFullInfoRemoteData:o}))},Da=Object(k.e)("photo"),Ca=function(e){return m()(e.photos.getPhotoWithInfo,Object(w.a)(function(e){return new Z.e(e)}))},ka=function(e){var t=e.value,a=Da(t).entities;return[Object(P.nb)(a),P.a.UpdatePhotoFullInfoRemoteData({photoId:t.id,photoFullInfoRemoteData:e})]};function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(e){return(Ua=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aa(e,t){return(Aa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Ma=Object(k.e)("relatedPhotos"),Fa=function(e){function o(e){var t,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),a=this,n=Ua(o).call(this,e),(t=!n||"object"!==xa(n)&&"function"!=typeof n?Ba(a):n).resetNumberOfRequests=function(){t.resetNumberOfRequestsSubject.next({})},t.onRequestToggleTruncatedDescription=function(){var e=t.props.location;t.context.router.history.replace(Object(C.o)(function(e){return{shouldTruncateDescription:!e.shouldTruncateDescription}})(e))},t.state=t.getInitialState(),t.onRequestMainImageToggleZoom=t.onRequestMainImageToggleZoom.bind(Ba(Ba(t))),t.onMainImageLoad=t.onMainImageLoad.bind(Ba(Ba(t))),t.onRootRouteLeaveSubject=new u.a,t.onInfoRouteLeaveSubject=new u.a,t.requestSubject=new u.a,t.resetNumberOfRequestsSubject=new u.a,t}var t,a,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Aa(e,t)}(o,s["PureComponent"]),t=o,(a=[{key:"getDefaultState",value:function(){return{mainImageCurrentSrc:I.a.none()}}},{key:"getInitialState",value:function(){return this.getDefaultState()}},{key:"getResetState",value:function(){return this.getDefaultState()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.renderType;this.setupProgressBar(),M.a.is.Unenhanced(a)||this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet(),t.params.subRoute===U.a.info&&this.fetchPhotoStatsThenCacheAndSet()}},{key:"componentWillReceiveProps",value:function(e){var a=this,t=this.props,n=t.match,o=t.maybePhoto,r=t.photoFullInfoRemoteData,c=t.photoStatsRemoteData,i=e.maybePhoto;n.params.id!==e.match.params.id?this.reset():i.forEach(function(t){o.map(function(e){return e!==t}).getOrElse(!0)&&(r.type===Z.f.Success&&Object(H.d)(t)&&a.updatePhotoFullInfoRemoteData(new Z.e(t)),c.type===Z.f.Success&&Object(H.e)(t)&&a.updatePhotoStatsRemoteData(new Z.e(t.stats)))})}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,a=t.id,n=t.subRoute,o=e.match.params,r=o.id,c=o.subRoute;a!==r&&(this.cleanup(),this.fetchThenCacheAndSet(),this.fetchRelatedPhotosThenCacheAndSet());var i=c===U.a.info,s=n===U.a.info;!i&&s?this.fetchPhotoStatsThenCacheAndSet():i&&!s&&this.onInfoRouteLeaveSubject.next({})}},{key:"componentWillUnmount",value:function(){this.cleanup()}},{key:"setupProgressBar",value:function(){var e=this.requestSubject.asObservable(),t=this.props,a=t.hideProgressBar,n=t.showProgressBar;this.resetNumberOfRequestsSubject.asObservable().pipe(Object(p.a)({}),Object(f.a)(function(){return e.pipe(Object(h.a)(function(e){var t,a=Object(d.a)({}),n=e.pipe(function(e){return e.lift(new y(t,e))});return a.pipe(Object(_.a)(1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return e.lift.call(E.a.apply(void 0,[e].concat(t)))}}(n.pipe(Object(_.a)(-1))))}),Object(S.a)(r.a,0),Object(p.a)(0))})).pipe(Object(w.a)(function(e){return 0<e}),Object(j.a)()).subscribe(function(e){e?n():a()})}},{key:"cleanup",value:function(){this.onRootRouteLeaveSubject.next({}),this.onInfoRouteLeaveSubject.next({})}},{key:"updatePhotoFullInfoRemoteData",value:function(e){var t=this.props,a=t.updatePhotoFullInfoRemoteData;a({photoId:t.match.params.id,photoFullInfoRemoteData:e})}},{key:"updateRelatedPhotoIdsRemoteData",value:function(e){var t=this.props,a=t.updateRelatedPhotoIdsRemoteData;a({photoId:t.match.params.id,relatedPhotoIdsRemoteData:e})}},{key:"updatePhotoStatsRemoteData",value:function(e){var t=this.props,a=t.updatePhotoStatsRemoteData;a({photoId:t.match.params.id,photoStatsRemoteData:e})}},{key:"reset",value:function(){this.setState(this.getResetState()),this.resetNumberOfRequests()}},{key:"fetchThenCacheAndSet",value:function(){var e=this.props,t=e.match,a=e.maybePhoto,n=e.setErrorFlash,o=e.dispatch,r=t.params.id,c=this.context.router.history.replace;this.updatePhotoFullInfoRemoteData(new Z.b);var i=Ca(D.a)({photoId:r}).pipe(Object(R.a)(function(e){return Object(d.a)(new Z.a(e))}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(e){if(o(P.a.RouteDataUpdated({})),e.type===Z.f.Failure)Object(F.d)(e.value)?n({message:"There was a network error. Please check your internet connection."}):(n({message:"There was a server error. Please try again later."}),a.isEmpty()&&Object(L.m)(c)(e.value));else{var t=ka(e);o(P.a.BatchActions({actions:t}))}}),this.requestSubject.next(i)}},{key:"fetchRelatedPhotosThenCacheAndSet",value:function(){var n=this,e=this.props,t=e.match,o=e.updateData,a=e.relatedPhotoIdsRemoteData,r=t.params.id,c=function(){switch(a.type){case Z.f.Reloading:case Z.f.Success:return new Z.d(a.value);case Z.f.Failure:case Z.f.Loading:case Z.f.NotAsked:return new Z.b}}();this.updateRelatedPhotoIdsRemoteData(c);var i=D.a.photos.getRelatedPhotos({photoId:r}).pipe(Object(w.a)(function(e){return{normalizedResponse:Ma(e),remoteData:new Z.e(e.results.map(function(e){return e.id}))}}),Object(R.a)(function(e){return Object(d.a)({normalizedResponse:void 0,remoteData:new Z.a(e)})}),Object(T.a)(this.onRootRouteLeaveSubject),Object(N.a)());i.subscribe(function(e){var t=e.normalizedResponse,a=e.remoteData;void 0!==t&&o(t.entities),n.updateRelatedPhotoIdsRemoteData(a)}),this.requestSubject.next(i)}},{key:"fetchPhotoStatsThenCacheAndSet",value:function(){var n=this,e=this.props,t=e.match,o=e.updatePhotoStats,r=t.params.id;this.updatePhotoStatsRemoteData(new Z.b);var a=D.a.photos.getPhotoStats({photoId:r}).pipe(Object(w.a)(function(e){return{response:e,remoteData:new Z.e(e)}}),Object(R.a)(function(e){return Object(d.a)({response:void 0,remoteData:new Z.a(e)})}),Object(T.a)(this.onInfoRouteLeaveSubject),Object(N.a)());a.subscribe(function(e){var t=e.response,a=e.remoteData;void 0!==t&&o(r,t),n.updatePhotoStatsRemoteData(a)}),this.requestSubject.next(a)}},{key:"onRequestMainImageToggleZoom",value:function(){this.trackToggleZoomableMainImageZoom(),this.toggleZoomableMainImageZoom()}},{key:"trackToggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.trackZoomedInPhoto,n=e.trackZoomedOutPhoto,o=e.match.params.id;Object(C.l)({location:t}).zoomableMainImageOptions.isZoomedOut?a(o):n(o)}},{key:"toggleZoomableMainImageZoom",value:function(){var e=this.props,t=e.location,a=e.pageModalScrollResetRequested,n=this.context.router.history;Object(C.c)(t)&&a(),n.replace(Object(C.o)(function(e){var t=e.zoomableMainImageOptions;return{zoomableMainImageOptions:Object.assign({},t,{isZoomedOut:!t.isZoomedOut})}})(t))}},{key:"onMainImageLoad",value:function(e){var t;this.setState({mainImageCurrentSrc:(t=e.currentTarget,I.a.of(t.currentSrc).filter(A.b).orElseL(function(){return I.a.of(t.src).filter(A.b)}))})}},{key:"renderChildRoute",value:function(){var e=this.props,t=e.match,a=e.location,n=e.maybePhoto,o=e.photoFullInfoRemoteData,r=e.photoStatsRemoteData,c=e.renderType,i=t.params.id,s=Object(C.i)(a),l=Object(C.l)({location:a}),u=I.a.of(l.initialSrc),m=t.params.subRoute,d=!Object(C.e)(a)&&M.a.is.Enhanced(c);switch(m){case U.a.info:return s.filter(function(){return d}).map(function(e){return v.a.createElement(Oa,{maybeCachedPhoto:n,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:u,photoFullInfoRemoteData:o,photoStatsRemoteData:r})}).orUndefined();case U.a.share:return s.filter(function(){return d}).map(function(e){return v.a.createElement(Pa,{maybeCachedPhoto:n,photoId:i,modalLocationState:e,maybeMainImageCurrentSrc:u,photoFullInfoRemoteData:o})}).orUndefined();case void 0:return}}},{key:"render",value:function(){var e=this,t=this.props,a=t.maybePhoto,n=t.location,o=t.isLoggedIn,r=t.photoFullInfoRemoteData,c=t.relatedPhotoIdsRemoteData,i=t.renderType,s=Object(C.l)({location:n}),l=s.shouldTruncateDescription,u=M.a.match({Unenhanced:function(){return mt.Unenhanced({zoomable:{isZoomedOut:s.zoomableMainImageOptions.isZoomedOut}})},Enhanced:function(){return mt.Enhanced({zoomable:{isZoomedOut:s.zoomableMainImageOptions.isZoomedOut,onRequestToggleZoom:e.onRequestMainImageToggleZoom}})}})(i),m=I.a.of(s.initialSrc);return v.a.createElement(Kt,{maybeCachedPhoto:a,location:n,photoFullInfoRemoteData:r,maybeMainImageInitialSrc:m,relatedPhotoIdsRemoteData:c,onMainImageLoad:this.onMainImageLoad,mainImageRenderType:u,shouldTruncateDescription:l,onRequestToggleTruncatedDescription:this.onRequestToggleTruncatedDescription,isLoggedIn:o},this.renderChildRoute())}}])&&La(t.prototype,a),n&&La(t,n),o}();Fa.contextTypes={router:i.a.object.isRequired};var Wa=Object(x.a)({updateData:P.nb,updatePhotoStats:P.ob,setErrorFlash:P.G,trackZoomedInPhoto:P.hb,trackZoomedOutPhoto:P.ib,showProgressBar:P.N,hideProgressBar:P.r,pageModalScrollResetRequested:P.v,updatePhotoFullInfoRemoteData:P.a.UpdatePhotoFullInfoRemoteData,updateRelatedPhotoIdsRemoteData:P.a.UpdateRelatedPhotoIdsRemoteData,updatePhotoStatsRemoteData:P.a.UpdatePhotoStatsRemoteData}),qa=m()(Object(B.b)({routeType:B.a.DynamicRoute}),Object(l.connect)(function(){var n=Object(W.f)(),o=Object(q.b)(),r=Object(q.d)(),c=Object(q.c)();return function(e,t){var a=t.match.params.id;return{maybePhoto:I.a.of(n(e,a)),isLoggedIn:Object(z.k)(e),photoFullInfoRemoteData:o(e,{photoId:a}),relatedPhotoIdsRemoteData:r(e,{photoId:a}),photoStatsRemoteData:c(e,{photoId:a})}}},Wa),M.b)(Fa);a.d(t,"default",function(){return qa}),a.d(t,"PhotoFullInfoRemoteData",function(){}),a.d(t,"RelatedPhotoIdsRemoteData",function(){}),a.d(t,"PhotoStatsRemoteData",function(){})},985:function(e,t,a){"use strict";a.d(t,"a",function(){return h}),a.d(t,"b",function(){return g});a(19),a(20),a(14);var i=a(0),s=a.n(i),n=a(16),o=a(7),l=a(63),u=a(109);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h,c,b=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(a[n[o]]=e[n[o]])}return a};(c=h||(h={})).StaticRoute="StaticRoute",c.DynamicRoute="DynamicRoute";var g=function(e){var c=e.routeType;return function(r){var e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),d(this,p(t).apply(this,arguments))}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,i["Component"]),a=t,(n=[{key:"componentDidUpdate",value:function(){c===h.DynamicRoute?this.props.dynamicRouteComponentUpdated({}):this.props.staticRouteComponentUpdated({})}},{key:"render",value:function(){var e=this.props,t=(e.dynamicRouteComponentUpdated,e.staticRouteComponentUpdated,b(e,["dynamicRouteComponentUpdated","staticRouteComponentUpdated"]));return s.a.createElement(r,Object.assign({},t))}}])&&m(a.prototype,n),o&&m(a,o),t}();e.displayName="TrackRouteUpdates(".concat(Object(u.a)(r),")");var t=Object(l.b)()({dynamicRouteComponentUpdated:o.a.DynamicRouteComponentUpdated,staticRouteComponentUpdated:o.a.StaticRouteComponentUpdated});return Object(n.connect)(function(){return{}},t)(e)}}},987:function(e,t,a){e.exports={smallTag:"_6PxCM"}},989:function(e,t,a){e.exports={gutter:"8px",tagsContainer:"_2_OE1",tagItem:"_3Z-ua"}},991:function(e,t,a){"use strict";var n=a(265),o=a.n(n),r=a(0),c=a.n(r),i=a(10),s=a.n(i),l=a(16),u=a(805),m=a(7),d=a(171),p=a(987),f=a.n(p),h=function(e){var t=e.tag,a=e.emplacement,n=e.trackSearchSuggestionClick,o=e.className,r="linkUrl"in t?t.linkUrl:Object(d.b)(t.title);return c.a.createElement(u.a,{className:s()(f.a.smallTag,o),to:r,title:"".concat(t.title," images"),onClick:function(){return n(t.title.toLowerCase(),a)}},t.title)};h.displayName="SmallTag";var b={trackSearchSuggestionClick:m.eb},g=Object(l.connect)(function(){return{}},b)(h),v=a(989),y=a.n(v),O=function(e){var t=e.tags,a=e.emplacement,n=e.takeN;return c.a.createElement("div",{className:y.a.tagsContainer},(n?o()(t,n):t).map(function(e){return c.a.createElement("div",{key:e.title,className:y.a.tagItem},c.a.createElement(g,{tag:e,emplacement:a}))}))};O.displayName="SmallTagsList";var _=O;a.d(t,"a",function(){return _})},992:function(e,t,a){e.exports={colorWhite:"#fff",colorLightGrey:"#ddd",colorGrey:"#999",colorDarkGrey:"#777",colorBlue:"#007fff",colorDarkBlue:"#006aff",colorBlack:"#000",followButton:"_3nDcb",isFollowing:"_2br-F",followIcon:"_2BKrY"}}}]);
//# sourceMappingURL=photos-route.b80c1.js.map